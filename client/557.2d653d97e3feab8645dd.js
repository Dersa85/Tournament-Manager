"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[557],{557:(R,p,i)=>{i.r(p),i.d(p,{TeamPointModule:()=>L});var s=i(3679),h=i(9557),T=i(4586),l=i(8583),d=i(3423),t=i(7716),b=i(9847),v=i(739),O=i(7574),u=i(3637),M=i(6561);function Z(o=0,r=u.P){return(!(0,M.k)(o)||o<0)&&(o=0),(!r||"function"!=typeof r.schedule)&&(r=u.P),new O.y(n=>(n.add(r.schedule(y,o,{subscriber:n,counter:0,period:o})),n))}function y(o){const{subscriber:r,counter:n,period:e}=o;r.next(n),this.schedule({subscriber:r,counter:n+1,period:e},e)}var A=i(8002),g=i(2304),S=i(3978);function x(o,r){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.qZA()),2&o){const n=r.$implicit;t.Gre("point team-",r.index,""),t.xp6(2),t.Oqu(n)}}function F(o,r){if(1&o&&(t.ynx(0),t.YNc(1,x,3,4,"div",4),t.BQk()),2&o){const n=r.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}let f=(()=>{class o{constructor(n,e,a){this.boardService=n,this.hostRef=e,this.router=a,this.BORD_TYPE="TeamPointBoard",this.board$=this.getBoard(),this.points$=this.getPoints(),this.scale$=this.getScale()}getScale(){return this.boardService.setTransformScale(this.hostRef.nativeElement),this.boardService.transformScale}getBoard(){const n=this.router.snapshot.paramMap.get("id");return this.boardService.setBoard(this.BORD_TYPE,n),this.boardService.board}getPoints(){const n=[0,0];return(0,v.aj)([this.boardService.board,Z(125)]).pipe((0,A.U)(([e,a])=>{if(null==e)return n;0==e.points[0]&&0==e.points[1]&&(n[0]=0,n[1]=0);const m=e.points;for(let c=0;c<m.length;c++)m[c]>n[c]&&n[c]++;return n}))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(g.$),t.Y36(t.SBq),t.Y36(d.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-team-point-scoreboard"]],decls:10,vars:12,consts:[[1,"scoreboard"],[1,"points-container"],[4,"ngIf"],[1,"time-container"],[3,"class",4,"ngFor","ngForOf"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"div",1),t.YNc(3,F,2,1,"ng-container",2),t.ALo(4,"async"),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"timeLeft"),t.ALo(9,"async"),t.qZA(),t.qZA(),t.qZA()),2&n){let a;t.Udp("transform",t.lcZ(1,4,e.scale$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(4,6,e.points$)),t.xp6(4),t.Oqu(t.lcZ(8,8,null==(a=t.lcZ(9,10,e.board$))||null==a.countdown?null:a.countdown.timeLeft))}},directives:[l.O5,l.sg],pipes:[l.Ov,S.W],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:#000;overflow:hidden}[_nghost-%COMP%]   .scoreboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#000}[_nghost-%COMP%]   .scoreboard[_ngcontent-%COMP%]   .points-container[_ngcontent-%COMP%]{display:flex;height:100%}[_nghost-%COMP%]   .scoreboard[_ngcontent-%COMP%]   .points-container[_ngcontent-%COMP%]   .team-0[_ngcontent-%COMP%]{background-color:red}[_nghost-%COMP%]   .scoreboard[_ngcontent-%COMP%]   .points-container[_ngcontent-%COMP%]   .team-1[_ngcontent-%COMP%]{background-color:#00f}[_nghost-%COMP%]   .scoreboard[_ngcontent-%COMP%]   .points-container[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex:1;height:100%;font-size:2rem}[_nghost-%COMP%]   .scoreboard[_ngcontent-%COMP%]   .time-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:2rem;height:50%}"]}),o})();var U=i(8432),B=i(8101),J=i(8049),Y=i(1095),P=i(8295),I=i(9983);function N(o,r){if(1&o&&(t.TgZ(0,"mat-form-field"),t.TgZ(1,"mat-label"),t._uU(2),t.qZA(),t._UZ(3,"input",6),t.qZA()),2&o){const n=r.index;t.xp6(2),t.hij("Punkterichter ",n+1,""),t.xp6(1),t.Q6J("formControlName",n)}}function _(o,r){if(1&o&&(t.TgZ(0,"mat-form-field"),t.TgZ(1,"mat-label"),t._uU(2),t.qZA(),t._UZ(3,"input",6),t.qZA()),2&o){const n=r.index;t.xp6(2),t.hij("Punkterichter ",n+1,""),t.xp6(1),t.Q6J("formControlName",n)}}let $=(()=>{class o{constructor(n,e){this.boardService=n,this.fb=e,this.addPointsForm=this.fb.group({redPoints:this.fb.array([this.fb.control(0,[s.kI.required]),this.fb.control(0,[s.kI.required]),this.fb.control(0,[s.kI.required])],[s.kI.required]),bluePoints:this.fb.array([this.fb.control(0,[s.kI.required]),this.fb.control(0,[s.kI.required]),this.fb.control(0,[s.kI.required])],[s.kI.required])})}ngOnInit(){this.board$=this.boardService.board}get redPoints(){return this.addPointsForm.get("redPoints")}get bluePoints(){return this.addPointsForm.get("bluePoints")}addPoints(){this.board$.pipe((0,J.P)()).subscribe(n=>{const e=n.points;e[0]+=this.getAverageAndSetZero(this.redPoints),e[1]+=this.getAverageAndSetZero(this.bluePoints),this.boardService.updateTeamPoints(n.points)})}getAverageAndSetZero(n){const e=n.controls;let a=0,m=e.length;for(let c=0;c<m;c++){const C=e[c];a+=C.value,C.setValue(0)}return Math.floor(a/m)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(g.$),t.Y36(s.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-team-point-custom-control"]],decls:14,vars:4,consts:[[1,"points",3,"formGroup","submit"],[1,"inputs"],["formArrayName","redPoints",1,"team"],[4,"ngFor","ngForOf"],["formArrayName","bluePoints",1,"team"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["min","0","matInput","","type","number","placeholder","Team Rot",3,"formControlName"]],template:function(n,e){1&n&&(t.TgZ(0,"form",0),t.NdJ("submit",function(){return e.addPoints()}),t.TgZ(1,"h2"),t._uU(2,"Punkte hinzuf\xfcgen"),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t.TgZ(5,"h3"),t._uU(6,"Team Rot"),t.qZA(),t.YNc(7,N,4,2,"mat-form-field",3),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"h3"),t._uU(10,"Team Blau"),t.qZA(),t.YNc(11,_,4,2,"mat-form-field",3),t.qZA(),t.qZA(),t.TgZ(12,"button",5),t._uU(13,"Punkte hinzuf\xfcgen"),t.qZA(),t.qZA()),2&n&&(t.Q6J("formGroup",e.addPointsForm),t.xp6(7),t.Q6J("ngForOf",e.redPoints.controls),t.xp6(4),t.Q6J("ngForOf",e.bluePoints.controls),t.xp6(1),t.Q6J("disabled",e.addPointsForm.invalid))},directives:[s._Y,s.JL,s.sg,s.CE,l.sg,Y.lW,P.KE,P.hX,I.Nt,s.qQ,s.wV,s.Fj,s.JJ,s.u],styles:["[_nghost-%COMP%]{display:block;min-width:250px;border:1px solid #9b9b9b;border-radius:.5rem;background-color:#00000031}[_nghost-%COMP%]   .points[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:0 0 .5rem;width:100%}[_nghost-%COMP%]   .points[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin:0}[_nghost-%COMP%]   .points[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:100%}[_nghost-%COMP%]   .points[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:5rem}[_nghost-%COMP%]   .points[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .points[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin:0}"]}),o})();const j=[{path:"scoreboard/:id",component:(()=>{class o{constructor(n,e){this.router=n,this.route=e}keyhandler(n){this.router.navigate(["../../../"],{relativeTo:this.route})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.F0),t.Y36(d.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-team-point-scoreboard-container"]],hostBindings:function(n,e){1&n&&t.NdJ("keydown.escape",function(m){return e.keyhandler(m)},!1,t.evT)},decls:1,vars:0,template:function(n,e){1&n&&t._UZ(0,"app-team-point-scoreboard")},directives:[f],styles:[""]}),o})()},{path:"control/:id",component:(()=>{class o{constructor(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-team-point-control"]],decls:5,vars:0,consts:[["scoreboard",""],["breakTime",""],["timeControl",""],["customControl",""]],template:function(n,e){1&n&&(t.TgZ(0,"app-scoreboard-control-design"),t._UZ(1,"app-team-point-scoreboard",0),t._UZ(2,"app-break-time-control",1),t._UZ(3,"app-time-control",2),t._UZ(4,"app-team-point-custom-control",3),t.qZA())},directives:[b.Y,f,U.l,B.c,$],styles:[""]}),o})()}];let q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.Bz.forChild(j)],d.Bz]}),o})();var Q=i(9302),z=i(5511);let L=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[l.ez,q,T.D,h.q,Q.S,z.G,s.UX]]}),o})()}}]);